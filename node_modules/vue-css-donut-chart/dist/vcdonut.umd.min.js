(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vcdonut"]=t(require("vue")):e["vcdonut"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{for(const[n,r]of t)e[n]=r;return e}},"7e79":function(e,t,n){},8875:function(e,t,n){var r,o,c;(function(n,i){o=[],r=i,c="function"===typeof r?r.apply(t,o):r,void 0===c||(e.exports=c)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var n,r,o,c=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,i=/@([^@]*):(\d+):(\d+)\s*$/gi,u=c.exec(p.stack)||i.exec(p.stack),l=u&&u[1]||!1,a=u&&u[2]||!1,s=document.location.href.replace(document.location.hash,""),f=document.getElementsByTagName("script");l===s&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(a-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=n.replace(r,"$1").trim());for(var d=0;d<f.length;d++){if("interactive"===f[d].readyState)return f[d];if(f[d].src===l)return f[d];if(l===s&&f[d].innerHTML&&f[d].innerHTML.trim()===o)return f[d]}return null}}return e}))},"8bbf":function(t,n){t.exports=e},fb15:function(e,t,n){"use strict";if(n.r(t),"undefined"!==typeof window){var r=window.document.currentScript,o=n("8875");r=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var c=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(n.p=c[1])}var i=n("8bbf"),u=["title"];function l(e,t,n,r,o,c){var l=Object(i["resolveComponent"])("donut-sections");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"cdc-container",style:Object(i["normalizeStyle"])(c.placementStyles.container)},[Object(i["createElementVNode"])("div",{class:"cdc",ref:"donut",style:Object(i["normalizeStyle"])(c.donutStyles)},[Object(i["createVNode"])(l,Object(i["mergeProps"])(Object(i["toHandlers"])(c.sectionListeners),{sections:c.donutSections,"start-angle":n.startAngle}),null,16,["sections","start-angle"]),Object(i["createElementVNode"])("div",{class:"cdc-overlay",style:Object(i["normalizeStyle"])(c.overlayStyles)},[Object(i["createElementVNode"])("div",{class:"cdc-text",style:Object(i["normalizeStyle"])(c.donutTextStyles)},[Object(i["renderSlot"])(e.$slots,"default",{},(function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(n.text),1)]}))],4)],4)],4),Object(i["renderSlot"])(e.$slots,"legend",{},(function(){return[n.hasLegend?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:"cdc-legend",style:Object(i["normalizeStyle"])(c.placementStyles.legend)},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(c.legend,(function(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("span",{class:"cdc-legend-item",key:t,title:e.percent},[Object(i["createElementVNode"])("span",{class:"cdc-legend-item-color",style:Object(i["normalizeStyle"])(e.styles)},null,4),Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(e.label),1)],8,u)})),128))],4)):Object(i["createCommentVNode"])("",!0)]}))],4)}var a,s=["click","mouseenter","mouseleave","mouseover","mouseout","mousemove"].map((function(e){return{nativeEventName:e,sectionEventName:"section-".concat(e)}})),f=["#FF6384","#36A2EB","#FFCE56","#F58231","#46F0F0","#D2F53C","#911EB4","#F032E6","#3CB44B","#FFE119","#E6194B","#FABEBE","#008080","#E6BEFF","#0082C8","#AA6E28","#FFFAC8","#800000","#AAFFC3","#808000","#FFD8B1","#000080","#808080","#000000"],d=f;function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b="1em",y="dodgerblue",v={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},O=(a={},m(a,v.TOP,{container:{flexDirection:"column"},legend:{order:-1,margin:0,marginBottom:b}}),m(a,v.RIGHT,{container:{},legend:{flexDirection:"column",margin:0,marginLeft:b}}),m(a,v.BOTTOM,{container:{flexDirection:"column"},legend:{}}),m(a,v.LEFT,{container:{},legend:{flexDirection:"column",order:-1,margin:0,marginRight:b}}),a),g=function(e){return!!e&&e.constructor===Object},h=[{type:"number",key:"value",required:!0},{key:"label"},{key:"color"}];function j(e){return!!g(e)&&h.reduce((function(t,n){if(!t)return!1;var r=!0;return n.required&&(r=r&&Object.hasOwnProperty.call(e,n.key)),n.type&&(r=r&&p(e[n.key])===n.type),t&&r}),!0)}var S=["title"];function E(e,t,n,r,o,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"cdc-sections",style:Object(i["normalizeStyle"])(c.containerStyles)},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(c.donutSections,(function(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Object(i["mergeProps"])(Object(i["toHandlers"])(e.listeners),{key:t,class:["cdc-section",e.className],style:e.sectionStyles}),[Object(i["createElementVNode"])("div",{class:"cdc-filler",style:Object(i["normalizeStyle"])(e.fillerStyles),title:e.label},null,12,S)],16)})),128))],4)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x={LEFT:"cdc-section-left",RIGHT:"cdc-section-right"},F={props:{startAngle:{type:Number,default:0},sections:{type:Array,default:function(){return[]}}},emits:s.map((function(e){return e.sectionEventName})),computed:{containerStyles:function(){return{transform:"rotate(".concat(this.startAngle,"deg)")}},donutSections:function(){var e=this,t=180,n=0,r=0,o=this.sections.map((function(o){var c=[x.RIGHT,-180],i=c[0],u=c[1];if(n>=t){var l=[x.LEFT,180];i=l[0],u=l[1]}var a=u+o.degree,f={backgroundColor:o.color||y,transform:"rotate(".concat(a,"deg)")},d={transform:"rotate(".concat(r,"deg)")};n+=o.degree,180===n?r=0:r+=o.degree;var p=s.reduce((function(t,n){var r=n.nativeEventName,c=n.sectionEventName;return z(z({},t),{},k({},r,(function(t){return e.emitEvent(c,o,t)})))}),{});return{label:o.label,className:i,fillerStyles:f,sectionStyles:d,listeners:p}}));return o}},methods:{emitEvent:function(e,t,n){0!==t.value&&this.$emit(e,t.$section,n)}}},P=n("6b0d"),B=n.n(P);const T=B()(F,[["render",E]]);var L=T;n("7e79");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $={name:"vc-donut",props:{size:{type:Number,default:250,validator:function(e){return e>0}},unit:{type:String,default:"px"},thickness:{type:Number,default:20,validator:function(e){return e>=0&&e<=100}},text:{type:String,default:null},autoAdjustTextSize:{type:Boolean,default:!0},background:{type:String,default:"#ffffff"},foreground:{type:String,default:"#eeeeee"},sections:{type:Array,default:function(){return[]},validator:function(e){for(var t=0;t<e.length;++t)if(!j(e[t]))return!1;return!0}},total:{type:Number,default:100,validator:function(e){return e>0}},hasLegend:{type:Boolean,default:!1},legendPlacement:{type:String,default:v.BOTTOM,validator:function(e){return!!v[e.toUpperCase()]}},startAngle:{type:Number,default:0}},emits:s.map((function(e){return e.sectionEventName})),watch:{autoAdjustTextSize:function(e){e?window.addEventListener("resize",this.resizeListener):window.removeEventListener("resize",this.resizeListener),this.recalcFontSize()},size:function(){this.recalcFontSize()},unit:function(){this.recalcFontSize()}},data:function(){return{donutEl:null,fontSize:"1em",resizeListener:null}},computed:{donutSections:function(){var e=this,t=this.sections.reduce((function(e,t){return e+t.value}),0);if("number"!==typeof t)return[];if(t=Number(t.toFixed(2)),t>this.total){var n="Sum of all the sections' values (".concat(t,") should not exceed `total` (").concat(this.total,")");throw new Error(n)}var r=360,o=180,c=0,i=0,u=[];return this.sections.forEach((function(t){var n=r*(t.value/e.total),l=[n];n>o&&(l=[o,n-o]);var a=t.color||d[i++];l.forEach((function(e){var n=Number((c+e).toFixed(2));if(n>o){var r=o-c;u.push(D(D({},t),{},{degree:r,color:a,$section:t}),D(D({},t),{},{degree:e-r,color:a,$section:t}))}else u.push(D(D({},t),{},{degree:e,color:a,$section:t}));c+=e,c>=o&&(c-=o)}))})),u},legend:function(){var e=this;if(!this.hasLegend)return null;var t=0;return this.sections.map((function(n,r){return{label:n.label||"Section ".concat(r+1),percent:"".concat(n.value," (").concat(n.value/e.total*100,"%)"),styles:{backgroundColor:n.color||d[t++]}}}))},placementStyles:function(){return this.hasLegend?O[this.legendPlacement]:{}},donutStyles:function(){var e="".concat(this.size).concat(this.unit),t={width:e,paddingBottom:e,backgroundColor:this.foreground};return t},overlayStyles:function(){var e=100,t=e-this.thickness,n="".concat(t,"%"),r="calc(50% - ".concat(t/2,"%)");return{height:n,width:n,top:r,left:r,backgroundColor:this.background}},donutTextStyles:function(){var e=this.fontSize;return{fontSize:e}},sectionListeners:function(){var e=this;return s.reduce((function(t,n){var r=n.sectionEventName;return D(D({},t),{},A({},r,(function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.emitSectionEvent.apply(e,[r].concat(n))})))}),{})}},methods:{recalcFontSize:function(){var e=this;if(this.autoAdjustTextSize){var t=.08,n=this.size;this.$nextTick((function(){"px"!==e.unit&&(n=e.donutEl?e.donutEl.clientWidth:null),e.fontSize=n?"".concat((n*t).toFixed(2),"px"):"1em"}))}else this.fontSize="1em"},emitSectionEvent:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.$emit.apply(this,[e].concat(n))}},created:function(){this.resizeListener=this.recalcFontSize.bind(this)},mounted:function(){this.donutEl=this.$refs.donut,this.autoAdjustTextSize&&(this.recalcFontSize(),window.addEventListener("resize",this.resizeListener))},beforeUnmount:function(){window.removeEventListener("resize",this.resizeListener)},components:{DonutSections:L}};const C=B()($,[["render",l]]);var M=C,V={install:function(e){e.component(M.name,M)}},H=V;t["default"]=H}})}));